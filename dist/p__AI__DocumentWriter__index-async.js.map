{"version":3,"sources":["src/pages/AI/DocumentWriter/index.tsx","src/services/ossStorage.ts"],"sourcesContent":["import {\n  AlignCenterOutlined,\n  AlignLeftOutlined,\n  AlignRightOutlined,\n  BoldOutlined,\n  CloudUploadOutlined,\n  CopyOutlined,\n  DeleteOutlined,\n  DownloadOutlined,\n  EditOutlined,\n  FileTextOutlined,\n  FontColorsOutlined,\n  HighlightOutlined,\n  ItalicOutlined,\n  LeftOutlined,\n  LinkOutlined,\n  OrderedListOutlined,\n  RedoOutlined,\n  ReloadOutlined,\n  RightOutlined,\n  StrikethroughOutlined,\n  TableOutlined,\n  UnderlineOutlined,\n  UndoOutlined,\n  UnorderedListOutlined,\n  UploadOutlined,\n} from '@ant-design/icons';\nimport { PageContainer, ProCard } from '@ant-design/pro-components';\nimport {\n  Button,\n  Col,\n  Input,\n  List,\n  Modal,\n  message,\n  Progress,\n  Row,\n  Select,\n  Space,\n  Spin,\n  Tooltip,\n  Typography,\n  Upload,\n} from 'antd';\nimport React, { useState } from 'react';\nimport { aiOptimizeDocument, aiWriteDocument } from '@/services/ai';\nimport { ossStorageService } from '@/services/ossStorage';\n\nconst { TextArea } = Input;\nconst { Title } = Typography;\n\ninterface SavedDocument {\n  id: string;\n  title: string;\n  content: string;\n  type: string;\n  scenario?: string;\n  url?: string;\n  createdAt: Date;\n  size?: number;\n}\n\nconst DocumentWriter: React.FC = () => {\n  const [loading, setLoading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [prompt, setPrompt] = useState('');\n  const [content, setContent] = useState('');\n  const [htmlContent, setHtmlContent] = useState('');\n  const [documentType, setDocumentType] = useState<string>('speech');\n  const [scenario, setScenario] = useState<string>('');\n  const [titleInput, setTitleInput] = useState('');\n  const [lengthOption, setLengthOption] = useState<'short' | 'medium' | 'long'>(\n    'medium',\n  );\n  const [uploadedFiles, setUploadedFiles] = useState<File[]>([]);\n  const [savedDocs, setSavedDocs] = useState<SavedDocument[]>([]);\n  const [showSaveModal, setShowSaveModal] = useState(false);\n  const [settingsPanelOpen, setSettingsPanelOpen] = useState(true);\n\n  const scenarioOptions: Record<string, { label: string; value: string }[]> = {\n    speech: [\n      { label: '开场演讲', value: 'opening' },\n      { label: '闭幕演讲', value: 'closing' },\n    ],\n    notice: [\n      { label: '内部通知', value: 'internal' },\n      { label: '外部通知', value: 'external' },\n    ],\n    report: [\n      { label: '个人工作报告', value: 'personal' },\n      { label: '单位工作报告', value: 'unit' },\n      { label: '专项工作报告', value: 'special' },\n    ],\n    research: [\n      { label: '市场调研报告', value: 'market' },\n      { label: '行业调研报告', value: 'industry' },\n    ],\n    suggestion: [\n      { label: '政策建议', value: 'policy' },\n      { label: '管理建议', value: 'management' },\n    ],\n  };\n\n  const formatContentToHTML = (text: string) => {\n    if (!text) return '<p><br></p>';\n\n    return text\n      .split('\\n')\n      .map((line) => {\n        const trimmed = line.trim();\n        if (!trimmed) return '<p><br></p>';\n\n        if (trimmed.startsWith('#')) {\n          const level = (line.match(/^#+/) || [''])[0].length;\n          const content = trimmed.replace(/^#+\\s*/, '');\n          if (level === 1) {\n            return `<h1 style=\"text-align: center; font-size: 22px; font-weight: bold; margin: 24px 0 20px 0; color: #000; font-family: '黑体', 'SimHei', sans-serif;\">${content}</h1>`;\n          } else if (level === 2) {\n            return `<h2 style=\"font-size: 18px; font-weight: bold; margin: 20px 0 12px 0; color: #000; font-family: '黑体', 'SimHei', sans-serif;\">${content}</h2>`;\n          } else {\n            return `<h3 style=\"font-size: 16px; font-weight: bold; margin: 16px 0 10px 0; color: #000; font-family: '黑体', 'SimHei', sans-serif;\">${content}</h3>`;\n          }\n        }\n\n        return `<p style=\"text-indent: 2em; line-height: 1.75; margin: 8px 0; font-size: 16px; color: #000;\">${trimmed}</p>`;\n      })\n      .join('');\n  };\n\n  const handleGenerate = async () => {\n    if (!prompt.trim()) {\n      message.warning('请输入文档主题或描述');\n      return;\n    }\n    setLoading(true);\n    try {\n      const filesContent = uploadedFiles\n        .map((f) => `\\n[附加素材: ${f.name}]`)\n        .join('');\n      const response = await aiWriteDocument({\n        prompt: `${prompt}\\n类型: ${documentType}\\n场景: ${scenario}\\n字数: ${lengthOption}${filesContent}`,\n        documentType: documentType as any,\n        tone: 'formal',\n        language: 'zh-CN',\n      });\n      const generatedContent = response.data?.content || '';\n      setContent(generatedContent);\n      setHtmlContent(formatContentToHTML(generatedContent));\n      message.success('文档生成成功');\n    } catch (error) {\n      message.error('生成失败，请重试');\n      console.error(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleOptimize = async () => {\n    if (!content.trim()) {\n      message.warning('请先生成文档内容');\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await aiOptimizeDocument({\n        content,\n        optimizationType: 'all',\n      });\n      const optimizedContent = response.data?.content || '';\n      setContent(optimizedContent);\n      setHtmlContent(formatContentToHTML(optimizedContent));\n      message.success('文档优化成功');\n    } catch (error) {\n      message.error('优化失败，请重试');\n      console.error(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCopy = () => {\n    const editor = document.getElementById('word-editor');\n    if (editor) {\n      const text = editor.innerText;\n      navigator.clipboard.writeText(text);\n      message.success('已复制到剪贴板');\n    }\n  };\n\n  const handleSaveToCloud = () => {\n    if (!content.trim()) {\n      message.warning('请先生成文档内容');\n      return;\n    }\n    setShowSaveModal(true);\n  };\n\n  const handleConfirmSave = async () => {\n    if (!titleInput.trim()) {\n      message.warning('请输入文档标题');\n      return;\n    }\n    setLoading(true);\n    setUploadProgress(0);\n    try {\n      const editor = document.getElementById('word-editor');\n      const currentContent = editor?.innerText || content;\n      const blob = new Blob([currentContent], { type: 'text/plain' });\n      const file = new File([blob], `${titleInput}.txt`, {\n        type: 'text/plain',\n      });\n      const result = await ossStorageService.uploadFile(file, {\n        folder: 'documents',\n        onProgress: (percent) => setUploadProgress(percent),\n      });\n      const newDoc: SavedDocument = {\n        id: Date.now().toString(),\n        title: titleInput,\n        content: currentContent,\n        type: documentType,\n        scenario,\n        url: result.url,\n        createdAt: new Date(),\n        size: result.size,\n      };\n      setSavedDocs([newDoc, ...savedDocs]);\n      message.success('文档已保存到云端');\n      setShowSaveModal(false);\n      setTitleInput('');\n    } catch (error: any) {\n      message.error(error.message || '保存失败');\n      console.error(error);\n    } finally {\n      setLoading(false);\n      setUploadProgress(0);\n    }\n  };\n\n  const handleDownload = (doc: SavedDocument) => {\n    const blob = new Blob([doc.content], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${doc.title}.txt`;\n    a.click();\n    URL.revokeObjectURL(url);\n    message.success('下载成功');\n  };\n\n  const handleDelete = (docId: string) => {\n    Modal.confirm({\n      title: '确认删除',\n      content: '确定要删除这个文档吗？',\n      onOk: () => {\n        setSavedDocs(savedDocs.filter((d) => d.id !== docId));\n        message.success('文档已删除');\n      },\n    });\n  };\n\n  const handleLoadDocument = (doc: SavedDocument) => {\n    setContent(doc.content);\n    setHtmlContent(formatContentToHTML(doc.content));\n    setDocumentType(doc.type);\n    setScenario(doc.scenario || '');\n    message.success('文档已加载');\n  };\n\n  const execCommand = (command: string, value?: string) => {\n    document.execCommand(command, false, value);\n  };\n\n  const handleInput = (e: React.FormEvent<HTMLDivElement>) => {\n    const text = e.currentTarget.innerText;\n    setContent(text);\n  };\n\n  const insertTable = () => {\n    const table =\n      '<table border=\"1\" style=\"border-collapse: collapse; width: 100%; margin: 12px 0; border: 1px solid #000;\"><tr><td style=\"padding: 8px; border: 1px solid #000;\">单元格1</td><td style=\"padding: 8px; border: 1px solid #000;\">单元格2</td></tr><tr><td style=\"padding: 8px; border: 1px solid #000;\">单元格3</td><td style=\"padding: 8px; border: 1px solid #000;\">单元格4</td></tr></table>';\n    execCommand('insertHTML', table);\n  };\n\n  return (\n    <PageContainer\n      header={{\n        title: 'AI 公文生成器',\n        subTitle: '智能写作，高效办公',\n      }}\n    >\n      <div style={{ position: 'relative' }}>\n        <Row gutter={[16, 16]}>\n          {/* 左侧：文档编辑器 */}\n          <Col xs={24} lg={settingsPanelOpen ? 16 : 24}>\n            <ProCard bordered>\n              <Spin spinning={loading}>\n                <Space\n                  direction=\"vertical\"\n                  style={{ width: '100%' }}\n                  size=\"middle\"\n                >\n                  {/* Word 风格工具栏 */}\n                  <div\n                    style={{\n                      background: '#f3f4f6',\n                      padding: '8px 12px',\n                      borderRadius: '6px',\n                      border: '1px solid #e5e7eb',\n                      display: 'flex',\n                      flexWrap: 'wrap',\n                      gap: '6px',\n                      alignItems: 'center',\n                    }}\n                  >\n                    <Select\n                      defaultValue=\"16px\"\n                      style={{ width: 85 }}\n                      size=\"small\"\n                      onChange={(val) => execCommand('fontSize', val)}\n                      options={[\n                        { label: '12px', value: '2' },\n                        { label: '14px', value: '3' },\n                        { label: '16px', value: '4' },\n                        { label: '18px', value: '5' },\n                        { label: '20px', value: '6' },\n                      ]}\n                    />\n\n                    <div\n                      style={{\n                        borderLeft: '1px solid #d1d5db',\n                        height: '20px',\n                        margin: '0 4px',\n                      }}\n                    />\n\n                    <Tooltip title=\"粗体\">\n                      <Button\n                        size=\"small\"\n                        icon={<BoldOutlined />}\n                        onClick={() => execCommand('bold')}\n                      />\n                    </Tooltip>\n                    <Tooltip title=\"斜体\">\n                      <Button\n                        size=\"small\"\n                        icon={<ItalicOutlined />}\n                        onClick={() => execCommand('italic')}\n                      />\n                    </Tooltip>\n                    <Tooltip title=\"下划线\">\n                      <Button\n                        size=\"small\"\n                        icon={<UnderlineOutlined />}\n                        onClick={() => execCommand('underline')}\n                      />\n                    </Tooltip>\n                    <Tooltip title=\"删除线\">\n                      <Button\n                        size=\"small\"\n                        icon={<StrikethroughOutlined />}\n                        onClick={() => execCommand('strikeThrough')}\n                      />\n                    </Tooltip>\n\n                    <div\n                      style={{\n                        borderLeft: '1px solid #d1d5db',\n                        height: '20px',\n                        margin: '0 4px',\n                      }}\n                    />\n\n                    <Tooltip title=\"字体颜色\">\n                      <Button\n                        size=\"small\"\n                        icon={<FontColorsOutlined />}\n                        onClick={() => {\n                          const color = window.prompt(\n                            '请输入颜色（如：red 或 #ff0000）',\n                            '#000000',\n                          );\n                          if (color) execCommand('foreColor', color);\n                        }}\n                      />\n                    </Tooltip>\n                    <Tooltip title=\"高亮\">\n                      <Button\n                        size=\"small\"\n                        icon={<HighlightOutlined />}\n                        onClick={() => execCommand('backColor', '#ffff00')}\n                      />\n                    </Tooltip>\n\n                    <div\n                      style={{\n                        borderLeft: '1px solid #d1d5db',\n                        height: '20px',\n                        margin: '0 4px',\n                      }}\n                    />\n\n                    <Tooltip title=\"左对齐\">\n                      <Button\n                        size=\"small\"\n                        icon={<AlignLeftOutlined />}\n                        onClick={() => execCommand('justifyLeft')}\n                      />\n                    </Tooltip>\n                    <Tooltip title=\"居中\">\n                      <Button\n                        size=\"small\"\n                        icon={<AlignCenterOutlined />}\n                        onClick={() => execCommand('justifyCenter')}\n                      />\n                    </Tooltip>\n                    <Tooltip title=\"右对齐\">\n                      <Button\n                        size=\"small\"\n                        icon={<AlignRightOutlined />}\n                        onClick={() => execCommand('justifyRight')}\n                      />\n                    </Tooltip>\n\n                    <div\n                      style={{\n                        borderLeft: '1px solid #d1d5db',\n                        height: '20px',\n                        margin: '0 4px',\n                      }}\n                    />\n\n                    <Tooltip title=\"编号\">\n                      <Button\n                        size=\"small\"\n                        icon={<OrderedListOutlined />}\n                        onClick={() => execCommand('insertOrderedList')}\n                      />\n                    </Tooltip>\n                    <Tooltip title=\"符号\">\n                      <Button\n                        size=\"small\"\n                        icon={<UnorderedListOutlined />}\n                        onClick={() => execCommand('insertUnorderedList')}\n                      />\n                    </Tooltip>\n                    <Tooltip title=\"表格\">\n                      <Button\n                        size=\"small\"\n                        icon={<TableOutlined />}\n                        onClick={insertTable}\n                      />\n                    </Tooltip>\n                    <Tooltip title=\"链接\">\n                      <Button\n                        size=\"small\"\n                        icon={<LinkOutlined />}\n                        onClick={() => {\n                          const url = window.prompt('请输入链接地址:');\n                          if (url) execCommand('createLink', url);\n                        }}\n                      />\n                    </Tooltip>\n\n                    <div\n                      style={{\n                        borderLeft: '1px solid #d1d5db',\n                        height: '20px',\n                        margin: '0 4px',\n                      }}\n                    />\n\n                    <Tooltip title=\"撤销\">\n                      <Button\n                        size=\"small\"\n                        icon={<UndoOutlined />}\n                        onClick={() => execCommand('undo')}\n                      />\n                    </Tooltip>\n                    <Tooltip title=\"重做\">\n                      <Button\n                        size=\"small\"\n                        icon={<RedoOutlined />}\n                        onClick={() => execCommand('redo')}\n                      />\n                    </Tooltip>\n\n                    <div style={{ flex: 1 }} />\n\n                    <Space size=\"small\">\n                      <Button\n                        size=\"small\"\n                        icon={<ReloadOutlined />}\n                        onClick={handleOptimize}\n                        disabled={!content}\n                      >\n                        优化\n                      </Button>\n                      <Button\n                        size=\"small\"\n                        icon={<CopyOutlined />}\n                        onClick={handleCopy}\n                        disabled={!content}\n                      >\n                        复制\n                      </Button>\n                      <Button\n                        size=\"small\"\n                        type=\"primary\"\n                        icon={<CloudUploadOutlined />}\n                        onClick={handleSaveToCloud}\n                        disabled={!content}\n                      >\n                        保存\n                      </Button>\n                    </Space>\n                  </div>\n\n                  {/* 标准 A4 Word 编辑器 */}\n                  <div\n                    style={{\n                      background: '#e5e5e5',\n                      padding: '40px 20px',\n                      borderRadius: '4px',\n                      minHeight: '900px',\n                      display: 'flex',\n                      justifyContent: 'center',\n                      alignItems: 'flex-start',\n                    }}\n                  >\n                    <div\n                      id=\"word-editor\"\n                      contentEditable\n                      // biome-ignore lint/security/noDangerouslySetInnerHtml: 需要渲染富文本编辑器内容\n                      dangerouslySetInnerHTML={{ __html: htmlContent }}\n                      onInput={handleInput}\n                      style={{\n                        width: '21cm',\n                        minHeight: '29.7cm',\n                        background: '#ffffff',\n                        padding: '2.54cm 3.18cm',\n                        boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n                        fontSize: '16px',\n                        lineHeight: '1.75',\n                        fontFamily:\n                          '\"Times New Roman\", \"仿宋\", \"FangSong\", \"SimSun\", serif',\n                        color: '#000',\n                        outline: 'none',\n                        wordWrap: 'break-word',\n                        overflowWrap: 'break-word',\n                      }}\n                    />\n                  </div>\n                </Space>\n              </Spin>\n            </ProCard>\n          </Col>\n\n          {/* 右侧：设置面板 */}\n          {settingsPanelOpen && (\n            <Col xs={24} lg={8}>\n              <Space\n                direction=\"vertical\"\n                style={{ width: '100%' }}\n                size=\"middle\"\n              >\n                {/* 文档设置 */}\n                <ProCard title=\"文档设置\" bordered>\n                  <Space\n                    direction=\"vertical\"\n                    style={{ width: '100%' }}\n                    size=\"middle\"\n                  >\n                    <div>\n                      <Title level={5}>公文类型</Title>\n                      <Select\n                        value={documentType}\n                        onChange={(val) => {\n                          setDocumentType(val);\n                          setScenario('');\n                        }}\n                        style={{ width: '100%' }}\n                        options={[\n                          { label: '演讲稿', value: 'speech' },\n                          { label: '通知', value: 'notice' },\n                          { label: '工作报告', value: 'report' },\n                          { label: '调研报告', value: 'research' },\n                          { label: '意见建议', value: 'suggestion' },\n                        ]}\n                      />\n                    </div>\n\n                    <div>\n                      <Title level={5}>写作场景</Title>\n                      <Select\n                        value={scenario}\n                        onChange={setScenario}\n                        style={{ width: '100%' }}\n                        placeholder=\"选择场景\"\n                        options={scenarioOptions[documentType] || []}\n                      />\n                    </div>\n\n                    <div>\n                      <Title level={5}>公文标题</Title>\n                      <Input\n                        value={titleInput}\n                        onChange={(e) => setTitleInput(e.target.value)}\n                        placeholder=\"请输入公文标题\"\n                        maxLength={100}\n                      />\n                    </div>\n\n                    <div>\n                      <Title level={5}>字数</Title>\n                      <Select\n                        value={lengthOption}\n                        onChange={setLengthOption}\n                        style={{ width: '100%' }}\n                        options={[\n                          { label: '短 (500字左右)', value: 'short' },\n                          { label: '中 (1000字左右)', value: 'medium' },\n                          { label: '长 (2000字以上)', value: 'long' },\n                        ]}\n                      />\n                    </div>\n\n                    <div>\n                      <Title level={5}>写作素材（可选）</Title>\n                      <Upload\n                        beforeUpload={(file) => {\n                          setUploadedFiles([...uploadedFiles, file]);\n                          return false;\n                        }}\n                        multiple\n                        fileList={uploadedFiles.map((f, idx) => ({\n                          uid: `${f.name}-${idx}`,\n                          name: f.name,\n                          status: 'done' as const,\n                        }))}\n                        onRemove={(file) => {\n                          const idx = uploadedFiles.findIndex(\n                            (f, i) => `${f.name}-${i}` === file.uid,\n                          );\n                          if (idx > -1) {\n                            const newFiles = [...uploadedFiles];\n                            newFiles.splice(idx, 1);\n                            setUploadedFiles(newFiles);\n                          }\n                        }}\n                      >\n                        <Button icon={<UploadOutlined />} block size=\"small\">\n                          添加文件\n                        </Button>\n                      </Upload>\n                    </div>\n\n                    <div>\n                      <Title level={5}>文档描述</Title>\n                      <TextArea\n                        value={prompt}\n                        onChange={(e) => setPrompt(e.target.value)}\n                        placeholder=\"请输入文档主题或详细描述...\"\n                        rows={5}\n                        maxLength={2000}\n                        showCount\n                      />\n                    </div>\n\n                    <Button\n                      type=\"primary\"\n                      icon={<EditOutlined />}\n                      onClick={handleGenerate}\n                      loading={loading}\n                      block\n                      size=\"large\"\n                    >\n                      生成文档\n                    </Button>\n                  </Space>\n                </ProCard>\n\n                {/* 已保存文档列表 */}\n                <ProCard title=\"已保存的文档\" bordered>\n                  <List\n                    dataSource={savedDocs}\n                    locale={{ emptyText: '暂无保存的文档' }}\n                    renderItem={(doc) => (\n                      <List.Item\n                        actions={[\n                          <Button\n                            key=\"load\"\n                            type=\"link\"\n                            size=\"small\"\n                            onClick={() => handleLoadDocument(doc)}\n                          >\n                            加载\n                          </Button>,\n                          <Button\n                            key=\"download\"\n                            type=\"link\"\n                            size=\"small\"\n                            icon={<DownloadOutlined />}\n                            onClick={() => handleDownload(doc)}\n                          />,\n                          <Button\n                            key=\"delete\"\n                            type=\"link\"\n                            size=\"small\"\n                            danger\n                            icon={<DeleteOutlined />}\n                            onClick={() => handleDelete(doc.id)}\n                          />,\n                        ]}\n                      >\n                        <List.Item.Meta\n                          avatar={\n                            <FileTextOutlined\n                              style={{ fontSize: 20, color: '#1890ff' }}\n                            />\n                          }\n                          title={doc.title}\n                          description={\n                            <Space direction=\"vertical\" size={0}>\n                              <span style={{ fontSize: '12px' }}>\n                                类型: {doc.type}\n                              </span>\n                              {doc.scenario && (\n                                <span style={{ fontSize: '12px' }}>\n                                  场景: {doc.scenario}\n                                </span>\n                              )}\n                              <span style={{ fontSize: '12px' }}>\n                                {doc.createdAt.toLocaleDateString('zh-CN')}\n                              </span>\n                            </Space>\n                          }\n                        />\n                      </List.Item>\n                    )}\n                  />\n                </ProCard>\n              </Space>\n            </Col>\n          )}\n        </Row>\n\n        {/* 侧边收起按钮 */}\n        <div\n          style={{\n            position: 'fixed',\n            right: settingsPanelOpen\n              ? 'calc((100vw - 1200px) / 2 + 400px + 16px)'\n              : '20px',\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 999,\n            transition: 'right 0.3s ease',\n          }}\n        >\n          <Tooltip\n            title={settingsPanelOpen ? '收起面板' : '展开面板'}\n            placement=\"left\"\n          >\n            <Button\n              type=\"primary\"\n              shape=\"circle\"\n              size=\"large\"\n              icon={settingsPanelOpen ? <RightOutlined /> : <LeftOutlined />}\n              onClick={() => setSettingsPanelOpen(!settingsPanelOpen)}\n              style={{\n                boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n                width: '48px',\n                height: '48px',\n              }}\n            />\n          </Tooltip>\n        </div>\n      </div>\n\n      <Modal\n        title=\"保存文档到云端\"\n        open={showSaveModal}\n        onOk={handleConfirmSave}\n        onCancel={() => {\n          setShowSaveModal(false);\n          setTitleInput('');\n        }}\n        confirmLoading={loading}\n      >\n        <Space direction=\"vertical\" style={{ width: '100%' }} size=\"large\">\n          <div>\n            <Title level={5}>文档标题</Title>\n            <Input\n              value={titleInput}\n              onChange={(e) => setTitleInput(e.target.value)}\n              placeholder=\"请输入文档标题\"\n              maxLength={100}\n            />\n          </div>\n          {uploadProgress > 0 && (\n            <Progress percent={uploadProgress} status=\"active\" />\n          )}\n        </Space>\n      </Modal>\n    </PageContainer>\n  );\n};\n\nexport default DocumentWriter;\n","// services/ossStorageMock.ts\r\nimport axios from 'axios';\r\n\r\ninterface UploadOptions {\r\n    folder?: string;\r\n    filename?: string;\r\n    onProgress?: (percent: number) => void;\r\n}\r\n\r\ninterface FileInfo {\r\n    name: string;\r\n    url: string;\r\n    size: number;\r\n    type: string;\r\n    uploadTime: string | Date;\r\n}\r\n\r\nexport const ossStorageService = {\r\n    /**\r\n     * 上传单个文件（Mock）\r\n     */\r\n    uploadFile: async (file: File, options: UploadOptions = {}): Promise<FileInfo> => {\r\n        const formData = new FormData();\r\n        formData.append('filename', options.filename || file.name);\r\n        formData.append('folder', options.folder || 'documents');\r\n        formData.append('size', file.size.toString());\r\n        formData.append('type', file.type);\r\n\r\n        const response = await axios.post('/api/storage/upload', formData, {\r\n            onUploadProgress: (progressEvent) => {\r\n                if (options.onProgress && progressEvent.total) {\r\n                    const percent = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n                    options.onProgress(percent);\r\n                }\r\n            },\r\n        });\r\n\r\n        // 确保返回对象和 OSSStorageService 一致\r\n        return {\r\n            name: response.data.data.name,\r\n            url: response.data.data.url,\r\n            size: response.data.data.size,\r\n            type: response.data.data.type,\r\n            uploadTime: new Date(response.data.data.uploadTime),\r\n        };\r\n    },\r\n\r\n    /**\r\n     * 上传多个文件（Mock）\r\n     */\r\n    uploadMultipleFiles: async (files: File[], options: UploadOptions = {}): Promise<FileInfo[]> => {\r\n        const results: FileInfo[] = [];\r\n        for (const file of files) {\r\n            try {\r\n                const res = await ossStorageService.uploadFile(file, options);\r\n                results.push(res);\r\n            } catch (error) {\r\n                console.error(`上传文件 ${file.name} 失败`, error);\r\n            }\r\n        }\r\n        return results;\r\n    },\r\n\r\n    /**\r\n     * 获取文件临时访问 URL\r\n     */\r\n    getSignedUrl: async (objectName: string, expires: number = 3600): Promise<string> => {\r\n        const response = await axios.get(`/api/storage/file/${objectName}/url`);\r\n        return response.data.data.url;\r\n    },\r\n\r\n    /**\r\n     * 删除文件\r\n     */\r\n    deleteFile: async (objectName: string): Promise<void> => {\r\n        await axios.delete(`/api/storage/file/${objectName}`);\r\n    },\r\n\r\n    /**\r\n     * 列出文件\r\n     */\r\n    listFiles: async (folder?: string): Promise<FileInfo[]> => {\r\n        const response = await axios.get('/api/storage/files', { params: { folder } });\r\n        return response.data.data.files.map((f: any) => ({\r\n            name: f.name,\r\n            url: f.url,\r\n            size: f.size,\r\n            type: f.type,\r\n            uploadTime: new Date(f.uploadTime),\r\n        }));\r\n    },\r\n};\r\n\r\nexport default ossStorageService;\r\n"],"names":[],"mappings":";;;;;;;4BAyyBA;;;eAAA;;;;;;8BA/wBO;sCACgC;6BAgBhC;wEACyB;2BACoB;mCAClB;;;;;;;;;;AAElC,MAAM,EAAE,QAAQ,EAAE,GAAG,WAAK;AAC1B,MAAM,EAAE,KAAK,EAAE,GAAG,gBAAU;AAa5B,MAAM,iBAA2B;;IAC/B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,eAAQ,EAAC;IACvC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,eAAQ,EAAC;IACrD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,eAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,eAAQ,EAAC;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,eAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,eAAQ,EAAS;IACzD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,eAAQ,EAAS;IACjD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,eAAQ,EAAC;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,eAAQ,EAC9C;IAEF,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,eAAQ,EAAS,EAAE;IAC7D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,eAAQ,EAAkB,EAAE;IAC9D,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,eAAQ,EAAC;IACnD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,eAAQ,EAAC;IAE3D,MAAM,kBAAsE;QAC1E,QAAQ;YACN;gBAAE,OAAO;gBAAQ,OAAO;YAAU;YAClC;gBAAE,OAAO;gBAAQ,OAAO;YAAU;SACnC;QACD,QAAQ;YACN;gBAAE,OAAO;gBAAQ,OAAO;YAAW;YACnC;gBAAE,OAAO;gBAAQ,OAAO;YAAW;SACpC;QACD,QAAQ;YACN;gBAAE,OAAO;gBAAU,OAAO;YAAW;YACrC;gBAAE,OAAO;gBAAU,OAAO;YAAO;YACjC;gBAAE,OAAO;gBAAU,OAAO;YAAU;SACrC;QACD,UAAU;YACR;gBAAE,OAAO;gBAAU,OAAO;YAAS;YACnC;gBAAE,OAAO;gBAAU,OAAO;YAAW;SACtC;QACD,YAAY;YACV;gBAAE,OAAO;gBAAQ,OAAO;YAAS;YACjC;gBAAE,OAAO;gBAAQ,OAAO;YAAa;SACtC;IACH;IAEA,MAAM,sBAAsB,CAAC;QAC3B,IAAI,CAAC,MAAM,OAAO;QAElB,OAAO,KACJ,KAAK,CAAC,MACN,GAAG,CAAC,CAAC;YACJ,MAAM,UAAU,KAAK,IAAI;YACzB,IAAI,CAAC,SAAS,OAAO;YAErB,IAAI,QAAQ,UAAU,CAAC,MAAM;gBAC3B,MAAM,QAAQ,AAAC,CAAA,KAAK,KAAK,CAAC,UAAU;oBAAC;iBAAG,AAAD,CAAE,CAAC,EAAE,CAAC,MAAM;gBACnD,MAAM,UAAU,QAAQ,OAAO,CAAC,UAAU;gBAC1C,IAAI,UAAU,GACZ,OAAO,CAAC,iJAAiJ,EAAE,QAAQ,KAAK,CAAC;qBACpK,IAAI,UAAU,GACnB,OAAO,CAAC,6HAA6H,EAAE,QAAQ,KAAK,CAAC;qBAErJ,OAAO,CAAC,6HAA6H,EAAE,QAAQ,KAAK,CAAC;YAEzJ;YAEA,OAAO,CAAC,6FAA6F,EAAE,QAAQ,IAAI,CAAC;QACtH,GACC,IAAI,CAAC;IACV;IAEA,MAAM,iBAAiB;QACrB,IAAI,CAAC,OAAO,IAAI,IAAI;YAClB,aAAO,CAAC,OAAO,CAAC;YAChB;QACF;QACA,WAAW;QACX,IAAI;gBAUuB;YATzB,MAAM,eAAe,cAClB,GAAG,CAAC,CAAC,IAAM,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC,EAChC,IAAI,CAAC;YACR,MAAM,WAAW,MAAM,IAAA,mBAAe,EAAC;gBACrC,QAAQ,CAAC,EAAE,OAAO,MAAM,EAAE,aAAa,MAAM,EAAE,SAAS,MAAM,EAAE,aAAa,EAAE,aAAa,CAAC;gBAC7F,cAAc;gBACd,MAAM;gBACN,UAAU;YACZ;YACA,MAAM,mBAAmB,EAAA,iBAAA,SAAS,IAAI,cAAb,qCAAA,eAAe,OAAO,KAAI;YACnD,WAAW;YACX,eAAe,oBAAoB;YACnC,aAAO,CAAC,OAAO,CAAC;QAClB,EAAE,OAAO,OAAO;YACd,aAAO,CAAC,KAAK,CAAC;YACd,QAAQ,KAAK,CAAC;QAChB,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,iBAAiB;QACrB,IAAI,CAAC,QAAQ,IAAI,IAAI;YACnB,aAAO,CAAC,OAAO,CAAC;YAChB;QACF;QACA,WAAW;QACX,IAAI;gBAKuB;YAJzB,MAAM,WAAW,MAAM,IAAA,sBAAkB,EAAC;gBACxC;gBACA,kBAAkB;YACpB;YACA,MAAM,mBAAmB,EAAA,iBAAA,SAAS,IAAI,cAAb,qCAAA,eAAe,OAAO,KAAI;YACnD,WAAW;YACX,eAAe,oBAAoB;YACnC,aAAO,CAAC,OAAO,CAAC;QAClB,EAAE,OAAO,OAAO;YACd,aAAO,CAAC,KAAK,CAAC;YACd,QAAQ,KAAK,CAAC;QAChB,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,aAAa;QACjB,MAAM,SAAS,SAAS,cAAc,CAAC;QACvC,IAAI,QAAQ;YACV,MAAM,OAAO,OAAO,SAAS;YAC7B,UAAU,SAAS,CAAC,SAAS,CAAC;YAC9B,aAAO,CAAC,OAAO,CAAC;QAClB;IACF;IAEA,MAAM,oBAAoB;QACxB,IAAI,CAAC,QAAQ,IAAI,IAAI;YACnB,aAAO,CAAC,OAAO,CAAC;YAChB;QACF;QACA,iBAAiB;IACnB;IAEA,MAAM,oBAAoB;QACxB,IAAI,CAAC,WAAW,IAAI,IAAI;YACtB,aAAO,CAAC,OAAO,CAAC;YAChB;QACF;QACA,WAAW;QACX,kBAAkB;QAClB,IAAI;YACF,MAAM,SAAS,SAAS,cAAc,CAAC;YACvC,MAAM,iBAAiB,CAAA,mBAAA,6BAAA,OAAQ,SAAS,KAAI;YAC5C,MAAM,OAAO,IAAI,KAAK;gBAAC;aAAe,EAAE;gBAAE,MAAM;YAAa;YAC7D,MAAM,OAAO,IAAI,KAAK;gBAAC;aAAK,EAAE,CAAC,EAAE,WAAW,IAAI,CAAC,EAAE;gBACjD,MAAM;YACR;YACA,MAAM,SAAS,MAAM,6BAAiB,CAAC,UAAU,CAAC,MAAM;gBACtD,QAAQ;gBACR,YAAY,CAAC,UAAY,kBAAkB;YAC7C;YACA,MAAM,SAAwB;gBAC5B,IAAI,KAAK,GAAG,GAAG,QAAQ;gBACvB,OAAO;gBACP,SAAS;gBACT,MAAM;gBACN;gBACA,KAAK,OAAO,GAAG;gBACf,WAAW,IAAI;gBACf,MAAM,OAAO,IAAI;YACnB;YACA,aAAa;gBAAC;mBAAW;aAAU;YACnC,aAAO,CAAC,OAAO,CAAC;YAChB,iBAAiB;YACjB,cAAc;QAChB,EAAE,OAAO,OAAY;YACnB,aAAO,CAAC,KAAK,CAAC,MAAM,OAAO,IAAI;YAC/B,QAAQ,KAAK,CAAC;QAChB,SAAU;YACR,WAAW;YACX,kBAAkB;QACpB;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,MAAM,OAAO,IAAI,KAAK;YAAC,IAAI,OAAO;SAAC,EAAE;YAAE,MAAM;QAAa;QAC1D,MAAM,MAAM,IAAI,eAAe,CAAC;QAChC,MAAM,IAAI,SAAS,aAAa,CAAC;QACjC,EAAE,IAAI,GAAG;QACT,EAAE,QAAQ,GAAG,CAAC,EAAE,IAAI,KAAK,CAAC,IAAI,CAAC;QAC/B,EAAE,KAAK;QACP,IAAI,eAAe,CAAC;QACpB,aAAO,CAAC,OAAO,CAAC;IAClB;IAEA,MAAM,eAAe,CAAC;QACpB,WAAK,CAAC,OAAO,CAAC;YACZ,OAAO;YACP,SAAS;YACT,MAAM;gBACJ,aAAa,UAAU,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBAC9C,aAAO,CAAC,OAAO,CAAC;YAClB;QACF;IACF;IAEA,MAAM,qBAAqB,CAAC;QAC1B,WAAW,IAAI,OAAO;QACtB,eAAe,oBAAoB,IAAI,OAAO;QAC9C,gBAAgB,IAAI,IAAI;QACxB,YAAY,IAAI,QAAQ,IAAI;QAC5B,aAAO,CAAC,OAAO,CAAC;IAClB;IAEA,MAAM,cAAc,CAAC,SAAiB;QACpC,SAAS,WAAW,CAAC,SAAS,OAAO;IACvC;IAEA,MAAM,cAAc,CAAC;QACnB,MAAM,OAAO,EAAE,aAAa,CAAC,SAAS;QACtC,WAAW;IACb;IAEA,MAAM,cAAc;QAClB,MAAM,QACJ;QACF,YAAY,cAAc;IAC5B;IAEA,qBACE,2BAAC,4BAAa;QACZ,QAAQ;YACN,OAAO;YACP,UAAU;QACZ;;0BAEA,2BAAC;gBAAI,OAAO;oBAAE,UAAU;gBAAW;;kCACjC,2BAAC,SAAG;wBAAC,QAAQ;4BAAC;4BAAI;yBAAG;;0CAEnB,2BAAC,SAAG;gCAAC,IAAI;gCAAI,IAAI,oBAAoB,KAAK;0CACxC,cAAA,2BAAC,sBAAO;oCAAC,QAAQ;8CACf,cAAA,2BAAC,UAAI;wCAAC,UAAU;kDACd,cAAA,2BAAC,WAAK;4CACJ,WAAU;4CACV,OAAO;gDAAE,OAAO;4CAAO;4CACvB,MAAK;;8DAGL,2BAAC;oDACC,OAAO;wDACL,YAAY;wDACZ,SAAS;wDACT,cAAc;wDACd,QAAQ;wDACR,SAAS;wDACT,UAAU;wDACV,KAAK;wDACL,YAAY;oDACd;;sEAEA,2BAAC,YAAM;4DACL,cAAa;4DACb,OAAO;gEAAE,OAAO;4DAAG;4DACnB,MAAK;4DACL,UAAU,CAAC,MAAQ,YAAY,YAAY;4DAC3C,SAAS;gEACP;oEAAE,OAAO;oEAAQ,OAAO;gEAAI;gEAC5B;oEAAE,OAAO;oEAAQ,OAAO;gEAAI;gEAC5B;oEAAE,OAAO;oEAAQ,OAAO;gEAAI;gEAC5B;oEAAE,OAAO;oEAAQ,OAAO;gEAAI;gEAC5B;oEAAE,OAAO;oEAAQ,OAAO;gEAAI;6DAC7B;;;;;;sEAGH,2BAAC;4DACC,OAAO;gEACL,YAAY;gEACZ,QAAQ;gEACR,QAAQ;4DACV;;;;;;sEAGF,2BAAC,aAAO;4DAAC,OAAM;sEACb,cAAA,2BAAC,YAAM;gEACL,MAAK;gEACL,oBAAM,2BAAC,mBAAY;;;;;gEACnB,SAAS,IAAM,YAAY;;;;;;;;;;;sEAG/B,2BAAC,aAAO;4DAAC,OAAM;sEACb,cAAA,2BAAC,YAAM;gEACL,MAAK;gEACL,oBAAM,2BAAC,qBAAc;;;;;gEACrB,SAAS,IAAM,YAAY;;;;;;;;;;;sEAG/B,2BAAC,aAAO;4DAAC,OAAM;sEACb,cAAA,2BAAC,YAAM;gEACL,MAAK;gEACL,oBAAM,2BAAC,wBAAiB;;;;;gEACxB,SAAS,IAAM,YAAY;;;;;;;;;;;sEAG/B,2BAAC,aAAO;4DAAC,OAAM;sEACb,cAAA,2BAAC,YAAM;gEACL,MAAK;gEACL,oBAAM,2BAAC,4BAAqB;;;;;gEAC5B,SAAS,IAAM,YAAY;;;;;;;;;;;sEAI/B,2BAAC;4DACC,OAAO;gEACL,YAAY;gEACZ,QAAQ;gEACR,QAAQ;4DACV;;;;;;sEAGF,2BAAC,aAAO;4DAAC,OAAM;sEACb,cAAA,2BAAC,YAAM;gEACL,MAAK;gEACL,oBAAM,2BAAC,yBAAkB;;;;;gEACzB,SAAS;oEACP,MAAM,QAAQ,OAAO,MAAM,CACzB,0BACA;oEAEF,IAAI,OAAO,YAAY,aAAa;gEACtC;;;;;;;;;;;sEAGJ,2BAAC,aAAO;4DAAC,OAAM;sEACb,cAAA,2BAAC,YAAM;gEACL,MAAK;gEACL,oBAAM,2BAAC,wBAAiB;;;;;gEACxB,SAAS,IAAM,YAAY,aAAa;;;;;;;;;;;sEAI5C,2BAAC;4DACC,OAAO;gEACL,YAAY;gEACZ,QAAQ;gEACR,QAAQ;4DACV;;;;;;sEAGF,2BAAC,aAAO;4DAAC,OAAM;sEACb,cAAA,2BAAC,YAAM;gEACL,MAAK;gEACL,oBAAM,2BAAC,wBAAiB;;;;;gEACxB,SAAS,IAAM,YAAY;;;;;;;;;;;sEAG/B,2BAAC,aAAO;4DAAC,OAAM;sEACb,cAAA,2BAAC,YAAM;gEACL,MAAK;gEACL,oBAAM,2BAAC,0BAAmB;;;;;gEAC1B,SAAS,IAAM,YAAY;;;;;;;;;;;sEAG/B,2BAAC,aAAO;4DAAC,OAAM;sEACb,cAAA,2BAAC,YAAM;gEACL,MAAK;gEACL,oBAAM,2BAAC,yBAAkB;;;;;gEACzB,SAAS,IAAM,YAAY;;;;;;;;;;;sEAI/B,2BAAC;4DACC,OAAO;gEACL,YAAY;gEACZ,QAAQ;gEACR,QAAQ;4DACV;;;;;;sEAGF,2BAAC,aAAO;4DAAC,OAAM;sEACb,cAAA,2BAAC,YAAM;gEACL,MAAK;gEACL,oBAAM,2BAAC,0BAAmB;;;;;gEAC1B,SAAS,IAAM,YAAY;;;;;;;;;;;sEAG/B,2BAAC,aAAO;4DAAC,OAAM;sEACb,cAAA,2BAAC,YAAM;gEACL,MAAK;gEACL,oBAAM,2BAAC,4BAAqB;;;;;gEAC5B,SAAS,IAAM,YAAY;;;;;;;;;;;sEAG/B,2BAAC,aAAO;4DAAC,OAAM;sEACb,cAAA,2BAAC,YAAM;gEACL,MAAK;gEACL,oBAAM,2BAAC,oBAAa;;;;;gEACpB,SAAS;;;;;;;;;;;sEAGb,2BAAC,aAAO;4DAAC,OAAM;sEACb,cAAA,2BAAC,YAAM;gEACL,MAAK;gEACL,oBAAM,2BAAC,mBAAY;;;;;gEACnB,SAAS;oEACP,MAAM,MAAM,OAAO,MAAM,CAAC;oEAC1B,IAAI,KAAK,YAAY,cAAc;gEACrC;;;;;;;;;;;sEAIJ,2BAAC;4DACC,OAAO;gEACL,YAAY;gEACZ,QAAQ;gEACR,QAAQ;4DACV;;;;;;sEAGF,2BAAC,aAAO;4DAAC,OAAM;sEACb,cAAA,2BAAC,YAAM;gEACL,MAAK;gEACL,oBAAM,2BAAC,mBAAY;;;;;gEACnB,SAAS,IAAM,YAAY;;;;;;;;;;;sEAG/B,2BAAC,aAAO;4DAAC,OAAM;sEACb,cAAA,2BAAC,YAAM;gEACL,MAAK;gEACL,oBAAM,2BAAC,mBAAY;;;;;gEACnB,SAAS,IAAM,YAAY;;;;;;;;;;;sEAI/B,2BAAC;4DAAI,OAAO;gEAAE,MAAM;4DAAE;;;;;;sEAEtB,2BAAC,WAAK;4DAAC,MAAK;;8EACV,2BAAC,YAAM;oEACL,MAAK;oEACL,oBAAM,2BAAC,qBAAc;;;;;oEACrB,SAAS;oEACT,UAAU,CAAC;8EACZ;;;;;;8EAGD,2BAAC,YAAM;oEACL,MAAK;oEACL,oBAAM,2BAAC,mBAAY;;;;;oEACnB,SAAS;oEACT,UAAU,CAAC;8EACZ;;;;;;8EAGD,2BAAC,YAAM;oEACL,MAAK;oEACL,MAAK;oEACL,oBAAM,2BAAC,0BAAmB;;;;;oEAC1B,SAAS;oEACT,UAAU,CAAC;8EACZ;;;;;;;;;;;;;;;;;;8DAOL,2BAAC;oDACC,OAAO;wDACL,YAAY;wDACZ,SAAS;wDACT,cAAc;wDACd,WAAW;wDACX,SAAS;wDACT,gBAAgB;wDAChB,YAAY;oDACd;8DAEA,cAAA,2BAAC;wDACC,IAAG;wDACH,eAAe;wDACf,qEAAqE;wDACrE,yBAAyB;4DAAE,QAAQ;wDAAY;wDAC/C,SAAS;wDACT,OAAO;4DACL,OAAO;4DACP,WAAW;4DACX,YAAY;4DACZ,SAAS;4DACT,WAAW;4DACX,UAAU;4DACV,YAAY;4DACZ,YACE;4DACF,OAAO;4DACP,SAAS;4DACT,UAAU;4DACV,cAAc;wDAChB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4BASX,mCACC,2BAAC,SAAG;gCAAC,IAAI;gCAAI,IAAI;0CACf,cAAA,2BAAC,WAAK;oCACJ,WAAU;oCACV,OAAO;wCAAE,OAAO;oCAAO;oCACvB,MAAK;;sDAGL,2BAAC,sBAAO;4CAAC,OAAM;4CAAO,QAAQ;sDAC5B,cAAA,2BAAC,WAAK;gDACJ,WAAU;gDACV,OAAO;oDAAE,OAAO;gDAAO;gDACvB,MAAK;;kEAEL,2BAAC;;0EACC,2BAAC;gEAAM,OAAO;0EAAG;;;;;;0EACjB,2BAAC,YAAM;gEACL,OAAO;gEACP,UAAU,CAAC;oEACT,gBAAgB;oEAChB,YAAY;gEACd;gEACA,OAAO;oEAAE,OAAO;gEAAO;gEACvB,SAAS;oEACP;wEAAE,OAAO;wEAAO,OAAO;oEAAS;oEAChC;wEAAE,OAAO;wEAAM,OAAO;oEAAS;oEAC/B;wEAAE,OAAO;wEAAQ,OAAO;oEAAS;oEACjC;wEAAE,OAAO;wEAAQ,OAAO;oEAAW;oEACnC;wEAAE,OAAO;wEAAQ,OAAO;oEAAa;iEACtC;;;;;;;;;;;;kEAIL,2BAAC;;0EACC,2BAAC;gEAAM,OAAO;0EAAG;;;;;;0EACjB,2BAAC,YAAM;gEACL,OAAO;gEACP,UAAU;gEACV,OAAO;oEAAE,OAAO;gEAAO;gEACvB,aAAY;gEACZ,SAAS,eAAe,CAAC,aAAa,IAAI,EAAE;;;;;;;;;;;;kEAIhD,2BAAC;;0EACC,2BAAC;gEAAM,OAAO;0EAAG;;;;;;0EACjB,2BAAC,WAAK;gEACJ,OAAO;gEACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;gEAC7C,aAAY;gEACZ,WAAW;;;;;;;;;;;;kEAIf,2BAAC;;0EACC,2BAAC;gEAAM,OAAO;0EAAG;;;;;;0EACjB,2BAAC,YAAM;gEACL,OAAO;gEACP,UAAU;gEACV,OAAO;oEAAE,OAAO;gEAAO;gEACvB,SAAS;oEACP;wEAAE,OAAO;wEAAc,OAAO;oEAAQ;oEACtC;wEAAE,OAAO;wEAAe,OAAO;oEAAS;oEACxC;wEAAE,OAAO;wEAAe,OAAO;oEAAO;iEACvC;;;;;;;;;;;;kEAIL,2BAAC;;0EACC,2BAAC;gEAAM,OAAO;0EAAG;;;;;;0EACjB,2BAAC,YAAM;gEACL,cAAc,CAAC;oEACb,iBAAiB;2EAAI;wEAAe;qEAAK;oEACzC,OAAO;gEACT;gEACA,QAAQ;gEACR,UAAU,cAAc,GAAG,CAAC,CAAC,GAAG,MAAS,CAAA;wEACvC,KAAK,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC;wEACvB,MAAM,EAAE,IAAI;wEACZ,QAAQ;oEACV,CAAA;gEACA,UAAU,CAAC;oEACT,MAAM,MAAM,cAAc,SAAS,CACjC,CAAC,GAAG,IAAM,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,KAAK,KAAK,GAAG;oEAEzC,IAAI,MAAM,IAAI;wEACZ,MAAM,WAAW;+EAAI;yEAAc;wEACnC,SAAS,MAAM,CAAC,KAAK;wEACrB,iBAAiB;oEACnB;gEACF;0EAEA,cAAA,2BAAC,YAAM;oEAAC,oBAAM,2BAAC,qBAAc;;;;;oEAAK,KAAK;oEAAC,MAAK;8EAAQ;;;;;;;;;;;;;;;;;kEAMzD,2BAAC;;0EACC,2BAAC;gEAAM,OAAO;0EAAG;;;;;;0EACjB,2BAAC;gEACC,OAAO;gEACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;gEACzC,aAAY;gEACZ,MAAM;gEACN,WAAW;gEACX,SAAS;;;;;;;;;;;;kEAIb,2BAAC,YAAM;wDACL,MAAK;wDACL,oBAAM,2BAAC,mBAAY;;;;;wDACnB,SAAS;wDACT,SAAS;wDACT,KAAK;wDACL,MAAK;kEACN;;;;;;;;;;;;;;;;;sDAOL,2BAAC,sBAAO;4CAAC,OAAM;4CAAS,QAAQ;sDAC9B,cAAA,2BAAC,UAAI;gDACH,YAAY;gDACZ,QAAQ;oDAAE,WAAW;gDAAU;gDAC/B,YAAY,CAAC,oBACX,2BAAC,UAAI,CAAC,IAAI;wDACR,SAAS;0EACP,2BAAC,YAAM;gEAEL,MAAK;gEACL,MAAK;gEACL,SAAS,IAAM,mBAAmB;0EACnC;+DAJK;;;;;0EAON,2BAAC,YAAM;gEAEL,MAAK;gEACL,MAAK;gEACL,oBAAM,2BAAC,uBAAgB;;;;;gEACvB,SAAS,IAAM,eAAe;+DAJ1B;;;;;0EAMN,2BAAC,YAAM;gEAEL,MAAK;gEACL,MAAK;gEACL,MAAM;gEACN,oBAAM,2BAAC,qBAAc;;;;;gEACrB,SAAS,IAAM,aAAa,IAAI,EAAE;+DAL9B;;;;;yDAOP;kEAED,cAAA,2BAAC,UAAI,CAAC,IAAI,CAAC,IAAI;4DACb,sBACE,2BAAC,uBAAgB;gEACf,OAAO;oEAAE,UAAU;oEAAI,OAAO;gEAAU;;;;;;4DAG5C,OAAO,IAAI,KAAK;4DAChB,2BACE,2BAAC,WAAK;gEAAC,WAAU;gEAAW,MAAM;;kFAChC,2BAAC;wEAAK,OAAO;4EAAE,UAAU;wEAAO;;4EAAG;4EAC5B,IAAI,IAAI;;;;;;;oEAEd,IAAI,QAAQ,kBACX,2BAAC;wEAAK,OAAO;4EAAE,UAAU;wEAAO;;4EAAG;4EAC5B,IAAI,QAAQ;;;;;;;kFAGrB,2BAAC;wEAAK,OAAO;4EAAE,UAAU;wEAAO;kFAC7B,IAAI,SAAS,CAAC,kBAAkB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAe1D,2BAAC;wBACC,OAAO;4BACL,UAAU;4BACV,OAAO,oBACH,8CACA;4BACJ,KAAK;4BACL,WAAW;4BACX,QAAQ;4BACR,YAAY;wBACd;kCAEA,cAAA,2BAAC,aAAO;4BACN,OAAO,oBAAoB,SAAS;4BACpC,WAAU;sCAEV,cAAA,2BAAC,YAAM;gCACL,MAAK;gCACL,OAAM;gCACN,MAAK;gCACL,MAAM,kCAAoB,2BAAC,oBAAa;;;;2DAAM,2BAAC,mBAAY;;;;;gCAC3D,SAAS,IAAM,qBAAqB,CAAC;gCACrC,OAAO;oCACL,WAAW;oCACX,OAAO;oCACP,QAAQ;gCACV;;;;;;;;;;;;;;;;;;;;;;0BAMR,2BAAC,WAAK;gBACJ,OAAM;gBACN,MAAM;gBACN,MAAM;gBACN,UAAU;oBACR,iBAAiB;oBACjB,cAAc;gBAChB;gBACA,gBAAgB;0BAEhB,cAAA,2BAAC,WAAK;oBAAC,WAAU;oBAAW,OAAO;wBAAE,OAAO;oBAAO;oBAAG,MAAK;;sCACzD,2BAAC;;8CACC,2BAAC;oCAAM,OAAO;8CAAG;;;;;;8CACjB,2BAAC,WAAK;oCACJ,OAAO;oCACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;oCAC7C,aAAY;oCACZ,WAAW;;;;;;;;;;;;wBAGd,iBAAiB,mBAChB,2BAAC,cAAQ;4BAAC,SAAS;4BAAgB,QAAO;;;;;;;;;;;;;;;;;;;;;;;AAMtD;GAzuBM;KAAA;IA2uBN,WAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzyBf,6BAA6B;;;;;;;;;;;;IA6F7B,OAAiC;eAAjC;;IA5Ea,iBAAiB;eAAjB;;;;;;uEAhBK;;;;;;;;;AAgBX,MAAM,oBAAoB;IAC7B;;KAEC,GACD,YAAY,OAAO,MAAY,UAAyB,CAAC,CAAC;QACtD,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,YAAY,QAAQ,QAAQ,IAAI,KAAK,IAAI;QACzD,SAAS,MAAM,CAAC,UAAU,QAAQ,MAAM,IAAI;QAC5C,SAAS,MAAM,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ;QAC1C,SAAS,MAAM,CAAC,QAAQ,KAAK,IAAI;QAEjC,MAAM,WAAW,MAAM,cAAK,CAAC,IAAI,CAAC,uBAAuB,UAAU;YAC/D,kBAAkB,CAAC;gBACf,IAAI,QAAQ,UAAU,IAAI,cAAc,KAAK,EAAE;oBAC3C,MAAM,UAAU,KAAK,KAAK,CAAC,AAAC,cAAc,MAAM,GAAG,MAAO,cAAc,KAAK;oBAC7E,QAAQ,UAAU,CAAC;gBACvB;YACJ;QACJ;QAEA,+BAA+B;QAC/B,OAAO;YACH,MAAM,SAAS,IAAI,CAAC,IAAI,CAAC,IAAI;YAC7B,KAAK,SAAS,IAAI,CAAC,IAAI,CAAC,GAAG;YAC3B,MAAM,SAAS,IAAI,CAAC,IAAI,CAAC,IAAI;YAC7B,MAAM,SAAS,IAAI,CAAC,IAAI,CAAC,IAAI;YAC7B,YAAY,IAAI,KAAK,SAAS,IAAI,CAAC,IAAI,CAAC,UAAU;QACtD;IACJ;IAEA;;KAEC,GACD,qBAAqB,OAAO,OAAe,UAAyB,CAAC,CAAC;QAClE,MAAM,UAAsB,EAAE;QAC9B,KAAK,MAAM,QAAQ,MACf,IAAI;YACA,MAAM,MAAM,MAAM,kBAAkB,UAAU,CAAC,MAAM;YACrD,QAAQ,IAAI,CAAC;QACjB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,CAAC,KAAK,EAAE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE;QAC1C;QAEJ,OAAO;IACX;IAEA;;KAEC,GACD,cAAc,OAAO,YAAoB,UAAkB,IAAI;QAC3D,MAAM,WAAW,MAAM,cAAK,CAAC,GAAG,CAAC,CAAC,kBAAkB,EAAE,WAAW,IAAI,CAAC;QACtE,OAAO,SAAS,IAAI,CAAC,IAAI,CAAC,GAAG;IACjC;IAEA;;KAEC,GACD,YAAY,OAAO;QACf,MAAM,cAAK,CAAC,MAAM,CAAC,CAAC,kBAAkB,EAAE,WAAW,CAAC;IACxD;IAEA;;KAEC,GACD,WAAW,OAAO;QACd,MAAM,WAAW,MAAM,cAAK,CAAC,GAAG,CAAC,sBAAsB;YAAE,QAAQ;gBAAE;YAAO;QAAE;QAC5E,OAAO,SAAS,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAY,CAAA;gBAC7C,MAAM,EAAE,IAAI;gBACZ,KAAK,EAAE,GAAG;gBACV,MAAM,EAAE,IAAI;gBACZ,MAAM,EAAE,IAAI;gBACZ,YAAY,IAAI,KAAK,EAAE,UAAU;YACrC,CAAA;IACJ;AACJ;IAEA,WAAe"}